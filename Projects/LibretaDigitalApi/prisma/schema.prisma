generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["ADMLDA", "ADMPER", "ADMUSR"]
}

model Menor {
  id                                                        Int                    @id(map: "lda_menor_pk") @default(autoincrement()) @map("iden_menor")
  flag_activo                                               Boolean                @default(true)
  flag_eliminado                                            Boolean                @default(false)
  iden_persona                                              Int
  iden_per_apoderado                                        Int
  iden_per_apoderado_sup                                    Int?
  iden_jornada                                              Int?
  lda_comunicado_menor                                      lda_comunicado_menor[]
  lda_jornada                                               lda_jornada?           @relation(fields: [iden_jornada], references: [iden_jornada], onDelete: NoAction, onUpdate: NoAction, map: "lda_menor_lda_jornada_fk")
  per_persona                                               Persona                @relation(fields: [iden_persona], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "lda_menor_per_persona_fk")
  per_persona_lda_menor_iden_per_apoderadoToper_persona     Persona                @relation("lda_menor_iden_per_apoderadoToper_persona", fields: [iden_per_apoderado], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "lda_menor_per_persona_fk_1")
  per_persona_lda_menor_iden_per_apoderado_supToper_persona Persona?               @relation("lda_menor_iden_per_apoderado_supToper_persona", fields: [iden_per_apoderado_sup], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "lda_menor_per_persona_fk_2")
  lda_nivel_menor                                           lda_nivel_menor[]
  lda_vacuna_menor                                          lda_vacuna_menor[]

  @@map("lda_menor")
  @@schema("ADMLDA")
}

model TipoIdentificador {
  id      Int       @id(map: "per_tipo_identificador_pk") @default(autoincrement()) @map("iden_tipo_identificador")
  tipo    String    @map("desc_tipo_identificador") @db.VarChar
  activo  Boolean   @default(true) @map("flag_activo")
  Persona Persona[]

  @@map("per_tipo_identificador")
  @@schema("ADMPER")
}

model Persona {
  id                                                      Int               @id(map: "per_persona_pk") @default(autoincrement()) @map("iden_persona")
  primerNombre                                            String            @map("desc_primer_nombre") @db.VarChar
  segundoNombre                                           String?           @map("desc_segundo_nombre") @db.VarChar
  apellidoP                                               String?           @map("desc_apellido_paterno") @db.VarChar
  apellidoM                                               String?           @map("desc_apellido_materno") @db.VarChar
  idTipoIden                                              Int               @map("iden_tipo_identificador")
  run                                                     String?           @unique(map: "per_persona_unique") @map("desc_run") @db.VarChar
  char_dv                                                 String?           @db.Char(1)
  desc_dni                                                String?           @db.VarChar
  iden_nacionalidad                                       Int?
  flag_activo                                             Boolean           @default(true)
  flag_eliminado                                          Boolean           @default(false)
  desc_email                                              String?           @db.VarChar
  desc_tel                                                String?           @db.VarChar
  desc_direccion                                          String?           @db.VarChar
  fech_nacimiento                                         DateTime?         @db.Date
  iden_sexo                                               Int               @default(3)
  lda_educador                                            lda_educador[]
  lda_menor                                               Menor[]
  lda_menor_lda_menor_iden_per_apoderadoToper_persona     Menor[]           @relation("lda_menor_iden_per_apoderadoToper_persona")
  lda_menor_lda_menor_iden_per_apoderado_supToper_persona Menor[]           @relation("lda_menor_iden_per_apoderado_supToper_persona")
  lda_profesor                                            lda_profesor[]
  per_nacionalidad                                        Nacionalidad?     @relation(fields: [iden_nacionalidad], references: [iden_nacionalidad], onDelete: NoAction, onUpdate: NoAction, map: "per_persona_per_nacionalidad_fk")
  per_sexo                                                per_sexo          @relation(fields: [iden_sexo], references: [iden_sexo], onDelete: NoAction, onUpdate: NoAction, map: "per_persona_per_sexo_fk")
  TipoIdentificador                                       TipoIdentificador @relation(fields: [idTipoIden], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "per_persona_per_tipo_identificador_fk")
  Usuario                                                 Usuario[]

  @@map("per_persona")
  @@schema("ADMPER")
}

model Usuario {
  id        Int      @id(map: "usr_usuario_pk") @default(autoincrement()) @map("iden_usuario")
  idPersona Int      @map("iden_persona")
  password  String   @map("desc_password") @db.VarChar
  activo    Boolean  @default(true) @map("flag_activo")
  eliminado Boolean  @default(false) @map("flag_eliminado")
  iden_rol  Int?
  persona   Persona  @relation(fields: [idPersona], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "usr_usuario_per_persona_fk")
  usr_rol   usr_rol? @relation(fields: [iden_rol], references: [iden_rol], onDelete: NoAction, onUpdate: NoAction, map: "usr_usuario_usr_rol_fk")

  @@map("usr_usuario")
  @@schema("ADMUSR")
}

model Nacionalidad {
  iden_nacionalidad Int       @id(map: "per_nacionalidad_pk") @default(autoincrement())
  desc_nacionalidad String    @db.VarChar
  flag_activo       Boolean   @default(true)
  per_persona       Persona[]

  @@map("per_nacionalidad")
  @@schema("ADMPER")
}

model usr_rol {
  iden_rol    Int       @id(map: "usr_rol_pk") @default(autoincrement())
  desc_rol    String    @db.VarChar
  flag_activo Boolean   @default(true)
  usr_usuario Usuario[]

  @@schema("ADMUSR")
}

model usr_rol_usuario {
  iden_rol_usuario Int     @id(map: "usr_rol_usuario_pk") @default(autoincrement())
  iden_usuario     Int
  iden_rol         Int
  flag_activo      Boolean @default(true)

  @@schema("ADMUSR")
}

model lda_educador {
  iden_educador        Int                    @id(map: "lda_educador_pk") @default(autoincrement())
  iden_persona         Int
  flag_activo          Boolean                @default(true)
  flag_eliminado       Boolean                @default(false)
  lda_comunicado_menor lda_comunicado_menor[]
  per_persona          Persona                @relation(fields: [iden_persona], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "lda_educador_per_persona_fk")

  @@schema("ADMLDA")
}

model lda_jornada {
  iden_jornada     Int     @id(map: "lda_jornada_pk") @default(autoincrement())
  desc_nombre      String  @db.VarChar
  desc_descripcion String? @db.VarChar
  flag_activo      Boolean @default(true)
  flag_eliminado   Boolean @default(false)
  desc_hora_inicio String? @db.VarChar
  desc_hora_final  String? @db.VarChar
  lda_menor        Menor[]

  @@schema("ADMLDA")
}

model lda_nivel {
  iden_nivel       Int               @id(map: "lda_nivel_pk") @default(autoincrement())
  desc_nombre      String            @db.VarChar
  desc_descripcion String?           @db.VarChar
  flag_activo      Boolean           @default(true)
  flag_eliminado   Boolean           @default(false)
  iden_sala        Int?
  lda_sala         lda_sala?         @relation(fields: [iden_sala], references: [iden_sala], onDelete: NoAction, onUpdate: NoAction, map: "lda_nivel_lda_sala_fk")
  lda_nivel_menor  lda_nivel_menor[]
  lda_reunion      lda_reunion[]

  @@schema("ADMLDA")
}

model lda_sala {
  iden_sala        Int         @id(map: "lda_sala_pk") @default(autoincrement())
  desc_nombre      String      @db.VarChar
  desc_descripcion String?     @db.VarChar
  flag_activo      Boolean     @default(true)
  flag_eliminado   Boolean     @default(false)
  lda_nivel        lda_nivel[]

  @@schema("ADMLDA")
}

model per_sexo {
  iden_sexo   Int       @id(map: "per_sexo_pk") @default(autoincrement())
  desc_nombre String    @db.VarChar
  code_sexo   String    @db.Char(1)
  per_persona Persona[]

  @@schema("ADMPER")
}

model lda_comunicado {
  iden_comunicado        Int                    @id(map: "lda_comunicado_pk") @default(autoincrement())
  desc_titulo            String                 @db.VarChar
  desc_texto             String                 @db.VarChar
  fech_visible           DateTime               @db.Date
  iden_tipo_comunicado   Int
  flag_activo            Boolean                @default(true)
  flag_eliminado         Boolean                @default(false)
  flag_need_autorizacion Boolean                @default(false)
  iden_persona_creador   Int
  lda_comunicado_menor   lda_comunicado_menor[]

  @@schema("ADMLDA")
}

model lda_tipo_comunicado {
  iden_tipo_comunicado Int    @id(map: "lda_tipo_comunicado_pk") @default(autoincrement())
  desc_nombre          String @db.VarChar

  @@schema("ADMLDA")
}

model lda_profesor {
  iden_profesor  Int     @id(map: "lda_profesor_pk") @default(autoincrement())
  iden_persona   Int
  flag_activo    Boolean @default(true)
  flag_eliminado Boolean @default(false)
  per_persona    Persona @relation(fields: [iden_persona], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "lda_profesor_per_persona_fk")

  @@schema("ADMLDA")
}

model lda_comunicado_menor {
  iden_comunicado_elementos Int            @id(map: "lda_comunicado_elementos_pk") @default(autoincrement())
  iden_comunicado           Int
  iden_menor                Int?
  flag_activado             Boolean        @default(true)
  iden_educador             Int?
  flag_visto                Boolean        @default(false)
  lda_comunicado            lda_comunicado @relation(fields: [iden_comunicado], references: [iden_comunicado], onDelete: NoAction, onUpdate: NoAction, map: "lda_comunicado_elementos_lda_comunicado_fk")
  lda_educador              lda_educador?  @relation(fields: [iden_educador], references: [iden_educador], onDelete: NoAction, onUpdate: NoAction, map: "lda_comunicado_elementos_lda_educador_fk")
  lda_menor                 Menor?         @relation(fields: [iden_menor], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "lda_comunicado_elementos_lda_menor_fk")

  @@schema("ADMLDA")
}

model lda_reunion {
  iden_reunion     Int       @id(map: "lda_reunion_pk") @default(autoincrement())
  desc_titulo      String    @db.VarChar
  desc_descripcion String?   @db.VarChar
  fech_reunion     DateTime  @db.Date
  iden_nivel       Int
  lda_nivel        lda_nivel @relation(fields: [iden_nivel], references: [iden_nivel], onDelete: NoAction, onUpdate: NoAction, map: "lda_reunion_lda_nivel_fk")

  @@schema("ADMLDA")
}

model lda_nivel_menor {
  iden_nivel_menor Int       @id(map: "lda_nivel_menor_pk") @default(autoincrement())
  iden_nivel       Int
  iden_menor       Int
  flag_activo      Boolean   @default(true)
  flag_eliminado   Boolean   @default(false)
  lda_menor        Menor     @relation(fields: [iden_menor], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "lda_nivel_menor_lda_menor_fk")
  lda_nivel        lda_nivel @relation(fields: [iden_nivel], references: [iden_nivel], onDelete: NoAction, onUpdate: NoAction, map: "lda_nivel_menor_lda_nivel_fk")

  @@schema("ADMLDA")
}

model lda_vacuna {
  iden_vacuna      Int                @id(map: "lda_vacuna_pk") @default(autoincrement())
  desc_nombre      String             @db.VarChar
  fech_vacunacion  DateTime           @db.Date
  nmro_agno        Int
  lda_vacuna_menor lda_vacuna_menor[]

  @@schema("ADMLDA")
}

model lda_vacuna_menor {
  iden_vacuna_menor Int        @id(map: "lda_vacuna_menor_pk") @default(autoincrement())
  iden_vacuna       Int
  iden_menor        Int
  flag_autorizado   Boolean    @default(false)
  lda_menor         Menor      @relation(fields: [iden_menor], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "lda_vacuna_menor_lda_menor_fk")
  lda_vacuna        lda_vacuna @relation(fields: [iden_vacuna], references: [iden_vacuna], onDelete: NoAction, onUpdate: NoAction, map: "lda_vacuna_menor_lda_vacuna_fk")

  @@schema("ADMLDA")
}
